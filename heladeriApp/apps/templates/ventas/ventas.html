{% extends "base/base.html" %}
{% load humanize %}

{% block title %}Ventas{% endblock %}

{% block body_class %} sidebar-mini {% endblock body_class %}

{% block content %}

<h2>Lista de Ventas</h2>
<div class="grid-container">



<div class="row bg-warning p-3">
    <div class="col-4">
        <h5 class="text-right" >Total del d√≠a: {{total_ventas|floatformat:0|intcomma }}</h5>
    </div>
    
    <div class="col">
        <h5 class="text-right" >Total en caja: {{total_ventas_caja|floatformat:0|intcomma }}</h5>
    </div>
    <div class="col-2">
        <a href="{% url 'ventas:ventas_historial' %}" rel="noopener noreferrer"><span class="material-symbols-outlined">
            history
            </span></a>
    </div>
    
    <div class="col-2">
        <a class="btn-primary" href="{% url 'ventas:crear_venta' %}" role="button"><span class="material-symbols-outlined">
            add_circle
            </span></a>
    </div>
    
</div>
<br>
<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                {% for columna in columnas %}
                <th class="text-center">{{columna}}</th>
                {% endfor %}
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for venta in ventas_por_pagina %}
        <tr>

            <td>{{venta.id_cliente.nombre}}</td>
            <td>{{venta.total_venta|floatformat:0|intcomma}}</td>
            <td>{{venta.total_iva_10|floatformat:0|intcomma}}</td>
            <td>{{venta.total_iva_5|floatformat:0|intcomma}}</td>
            <td>{{venta.id_tipo_pago.descripcion}}</td>
            <td>{{venta.fecha_venta}}</td>
            <td> <a type="button" class="btn btn-danger" href="{% url 'ventas:eliminar_venta' venta.id_venta %}"><span class="material-symbols-outlined">
                delete
                </span></a>
                <a type="button" class="btn btn-primary" href="{% url 'ventas:editar_venta' venta.id_venta %}"><span class="material-symbols-outlined">
                    edit
                    </span></a>
                <a type="button" class="btn btn-info" href="{% url 'ventas:detalle_venta' venta.id_venta %}"><span class="material-symbols-outlined">
                    visibility
                    </span></a> 
            </td>
        </tr>
        {% endfor %}

        </tbody>
    </table>
    {% include "base/pagination.html" with items_page=ventas_por_pagina %}
</div>
</div>    
{% endblock %}
